<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details | Lunsara</title>
    
    <!-- Font Awesome for the cart icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f1f3f6;
            color: #212121;
            line-height: 1.4;
        }

        /* Header Styles */
        header {
            background-color: #8e44ad;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(142, 68, 173, 0.3);
        }

        .header-content {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        header h2 {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 700;
            margin: 0;
        }

        .logo {
            height: 40px;
            width: auto;
            margin-right: 5px;
        }

        .navbar {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .navbar a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 12px;
            transition: background-color 0.3s ease, color 0.3s ease;
            display: flex;
            align-items: center;
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .auth-login, .auth-logout {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.3s ease, color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .auth-login:hover, .auth-logout:hover {
            background-color: white;
            color: #8e44ad;
        }

.header-content {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cart-icon-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -12px;
            background-color: #ff6161;
            color: white;
            border-radius: 10px;
            width: 20px;
            height: 20px;
            font-size: 11px;
            display: none;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            border: 1px solid #8e44ad;
        }
.profile-status-bar {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            border-radius: 35px;
            padding: 8px 16px;
            box-shadow: 0 4px 15px rgba(142, 68, 173, 0.3);
            margin-left: 15px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .status-content {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .user-avatar {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
        }
        .user-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .user-name-display {
            font-weight: 600;
            font-size: 14px;
            color: white;
        }
        .status-actions {
            display: flex;
            gap: 15px;
            margin-left: 8px;
        }
        .status-btn {
            position: relative;
            width: auto;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 12px;
            padding: 0 10px;
            gap: 5px;
        }
        .status-label {
            font-size: 12px;
            font-weight: 700;
            white-space: nowrap;
        }
        .status-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        .status-btn.home-btn:hover,
        .status-btn.watchlist-btn:hover,
        .status-btn.bag-btn:hover,
        .status-btn.logout-btn:hover {
            background: white;
            color: #8e44ad;
        }

        .status-btn.login-btn {
            background: white;
            color: #8e44ad;
            border: 1px solid #8e44ad;
            text-align: center;
        }

        .status-btn.login-btn:hover {
            background: rgba(255, 255, 255, 0.9);
            color: #8e44ad;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(142, 68, 173, 0.3);
        }

        .status-cart-badge, .status-wishlist-badge {
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid #8e44ad;
            position: absolute;
            top: -6px;
            right: -8px;
            display: none;
        }
        .status-wishlist-badge {
             background-color: #e91e63;
        }

        /* Main Product Container */
        .product-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Product Layout */
        .product-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            padding: 30px;
        }

        /* Image Gallery */
        .product-gallery {
            position: relative;
        }

        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 15px;
            border: 1px solid #f0f0f0;
        }

        .thumbnail-container {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            justify-content: center;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 15px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }

        .thumbnail.active {
            border-color: #8e44ad;
        }

        .thumbnail:hover {
            border-color: #8e44ad;
        }

        /* Product Information */
        .product-info {
            padding-left: 20px;
        }

        .product-title {
            font-size: 24px;
            font-weight: 600;
            color: #212121;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .rating-stars {
            color: #ffc107;
            font-size: 16px;
        }

        .rating-count {
            color: #878787;
            font-size: 14px;
        }

        .product-price {
            margin-bottom: 20px;
        }

        .current-price {
            font-size: 28px;
            font-weight: 600;
            color: #212121;
            margin-right: 12px;
        }

        .original-price {
            font-size: 16px;
            color: #878787;
            text-decoration: line-through;
        }

        .discount {
            color: #388e3c;
            font-size: 14px;
            font-weight: 500;
        }

        .price-breakdown {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .price-row.total {
            border-top: 1px solid #e0e0e0;
            padding-top: 12px;
            font-weight: 600;
            font-size: 16px;
        }

        /* Mobile Price Breakdown */
        @media (max-width: 768px) {
            .price-breakdown {
                max-width: 300px;
                margin-left: auto;
                margin-right: auto;
                margin-bottom: 20px;
            }

            .price-row {
                font-size: 15px;
                margin-bottom: 10px;
            }

            .price-row.total {
                font-size: 17px;
                padding-top: 14px;
            }
        }

        @media (max-width: 480px) {
            .price-breakdown {
                padding: 14px;
            }

            .price-row {
                font-size: 14px;
            }

            .price-row.total {
                font-size: 16px;
            }
        }

        /* Product Highlights */
        .highlights {
            margin-bottom: 24px;
        }

        .highlights h3 {
            font-size: 18px;
            font-weight: 600;
            color: #212121;
            margin-bottom: 12px;
        }

        .highlight-list {
            list-style: none;
            padding: 0;
        }

        .highlight-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
            color: #212121;
        }

        .highlight-item i {
            color: #388e3c;
            margin-right: 8px;
            width: 16px;
        }

        /* Mobile Highlight List */
        @media (max-width: 768px) {
            .highlights {
                text-align: center;
                margin-bottom: 20px;
            }

            .highlights h3 {
                text-align: center;
                margin-bottom: 16px;
            }

            .highlight-list {
                text-align: left;
                display: inline-block;
                max-width: 400px;
            }

            .highlight-item {
                text-align: left;
                margin-bottom: 12px;
                font-size: 15px;
            }
        }

        @media (max-width: 480px) {
            .highlight-item {
                font-size: 14px;
            }

            .highlight-item i {
                margin-right: 10px;
            }
        }

        /* Quantity and Actions */
        .product-actions {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            border: 1px solid #d7d7d7;
            border-radius: 15px;
            overflow: hidden;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            font-size: 18px;
            color: #212121;
            transition: background-color 0.2s;
        }

        .quantity-btn:hover {
            background: #e9ecef;
        }

        .quantity-input {
            width: 60px;
            height: 40px;
            border: none;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
        }

        .btn-primary {
            background: #8e44ad;
            color: white;
            border: 1px solid #8e44ad;
            padding: 12px 24px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            background: #9356ad;
        }

        .btn-secondary {
            background: #fb641b;
            color: white;
            border: 1px solid #fb641b;
            padding: 12px 24px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary:hover {
            background: #e55a1a;
        }

        .btn-watchlist {
            background: #fff;
            color: #8e44ad;
            border: 2px solid #8e44ad;
            padding: 12px 24px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-watchlist:hover {
            background: #8e44ad;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(142, 68, 173, 0.3);
        }

        /* Delivery Info */
        .delivery-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 24px;
        }

        .delivery-info h3 {
            font-size: 16px;
            font-weight: 600;
            color: #212121;
            margin-bottom: 12px;
        }

        .delivery-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
            color: #212121;
        }

        .delivery-item i {
            color: #388e3c;
            margin-right: 8px;
            width: 16px;
        }

        /* Seller Info */
        .seller-info {
            background: #fff8e1;
            padding: 16px;
            border-radius: 15px;
            border-left: 4px solid #8e44ad;
        }

        .seller-name {
            font-weight: 600;
            color: #212121;
            margin-bottom: 4px;
        }

        .seller-rating {
            color: #878787;
            font-size: 14px;
        }

        /* Product Details Tabs */
        .product-tabs {
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 24px;
        }

        .tab-buttons {
            display: flex;
            gap: 0;
        }

        .tab-btn {
            padding: 16px 24px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #878787;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: #8e44ad;
            border-bottom-color: #8e44ad;
        }

        /* Mobile Tab Styles */
        @media (max-width: 768px) {
            .tab-buttons {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .tab-buttons::-webkit-scrollbar {
                display: none;
            }

            .tab-btn {
                padding: 14px 20px;
                font-size: 15px;
                min-width: 120px;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .tab-btn {
                padding: 12px 16px;
                font-size: 14px;
                min-width: 100px;
            }
        }

        .tab-content {
            display: none;
            padding: 24px 0;
        }

        .tab-content.active {
            display: block;
        }

        .specifications-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .specifications-table th,
        .specifications-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .specifications-table th {
            font-weight: 600;
            color: #212121;
            width: 30%;
            background: #f8f9fa;
        }

        .specifications-table tr:last-child td,
        .specifications-table tr:last-child th {
            border-bottom: none;
        }

        /* Tab Description Styling */
        .tab-description {
            max-width: 800px;
        }

        .tab-description h3 {
            font-size: 20px;
            font-weight: 600;
            color: #212121;
            margin-bottom: 16px;
            margin-top: 0;
        }

        .tab-description h4 {
            font-size: 16px;
            font-weight: 600;
            color: #212121;
            margin: 24px 0 12px 0;
        }

        .tab-description p {
            font-size: 14px;
            line-height: 1.6;
            color: #212121;
            margin-bottom: 16px;
            text-align: justify;
        }

        .tab-description ul {
            margin: 16px 0;
            padding-left: 20px;
        }

        .tab-description li {
            font-size: 14px;
            line-height: 1.6;
            color: #212121;
            margin-bottom: 8px;
        }

        /* Reviews Section */
        .reviews-section {
            max-width: 800px;
        }

        .reviews-header {
            margin-bottom: 24px;
        }

        .reviews-title {
            font-size: 20px;
            font-weight: 600;
            color: #212121;
            margin-bottom: 8px;
        }

        .reviews-summary {
            color: #878787;
            font-size: 14px;
        }

        .review-item {
            padding: 20px;
            border: 1px solid #f0f0f0;
            border-radius: 15px;
            margin-bottom: 16px;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: box-shadow 0.2s;
        }

        .review-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .reviewer-name {
            font-weight: 600;
            color: #212121;
            font-size: 16px;
        }

        .review-rating {
            color: #ffc107;
            font-size: 14px;
        }

        .review-text {
            color: #212121;
            line-height: 1.6;
            font-size: 14px;
        }

        .review-date {
            color: #878787;
            font-size: 12px;
            margin-top: 8px;
        }

        /* Related Products */
        .related-products {
            background: white;
            margin: 20px auto;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            max-width: 1200px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #212121;
            margin-bottom: 24px;
            text-align: center;
            position: relative;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border: 1px solid #f0f0f0;
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-card-info {
            padding: 16px;
        }

        .product-card-title {
            font-size: 16px;
            font-weight: 500;
            color: #212121;
            margin-bottom: 8px;
        }

        .product-card-price {
            font-size: 18px;
            font-weight: 600;
            color: #212121;
        }

        /* Footer */
        footer {
            background-color: #2c3e50;
            padding: 1rem 2rem;
            margin: 2rem auto;
            width: 90%;
            max-width: 1200px;
            border-radius: 15px;
            text-align: center;
            color: white;
        }
        
        .footer-content {
            text-align: center;
            color: white;
            font-size: 1rem;
        }

        /* Custom Notification Styles */
        .cart-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 1.2rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.3);
            z-index: 10000;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            min-width: 280px;
            border-left: 4px solid #219a52;
        }

        .cart-notification.show {
            transform: translateX(0);
        }

        .cart-notification-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .cart-notification-icon {
            font-size: 20px;
            color: #2ecc71;
            background: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-notification-text {
            flex: 1;
        }

        .cart-notification-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .cart-notification-message {
            font-size: 14px;
            opacity: 0.9;
        }

        .cart-notification-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 4px;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .cart-notification-close:hover {
            opacity: 1;
        }

        .cart-notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 0 0 12px 12px;
            animation: progress 3s linear forwards;
        }

        @keyframes progress {
            from { width: 100%; }
            to { width: 0%; }
        }

        /* Mobile Cart Notification */
        @media (max-width: 768px) {
            .cart-notification {
                right: 10px;
                left: 10px;
                min-width: auto;
                top: 80px;
                transform: translateY(-100px);
            }

            .cart-notification.show {
                transform: translateY(0);
            }

            .cart-notification-content {
                gap: 10px;
            }

            .cart-notification-icon {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }

            .cart-notification-title {
                font-size: 15px;
            }

            .cart-notification-message {
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            .cart-notification {
                padding: 1rem;
                border-radius: 10px;
            }

            .cart-notification-content {
                gap: 8px;
            }

            .cart-notification-icon {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }

            .cart-notification-title {
                font-size: 14px;
            }

            .cart-notification-message {
                font-size: 12px;
            }
        }

        /* Mobile Responsiveness */
        /* Mobile Header Styles */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
                justify-content: center;
                align-items: center;
            }

            .profile-status-bar {
                margin-left: 0;
                margin-top: 10px;
                padding: 8px 14px;
                border-radius: 20px;
            }

            .status-content {
                gap: 10px;
                justify-content: center;
            }

            .user-avatar {
                width: 30px;
                height: 30px;
                font-size: 16px;
            }

            .user-name-display {
                font-size: 13px;
                text-align: center;
            }

            .user-status {
                font-size: 10px;
                text-align: center;
            }

            .status-actions {
                gap: 15px;
                margin-left: 8px;
            }

            .status-btn {
                position: relative;
                width: auto;
                height: 28px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50px;
                background: rgba(255, 255, 255, 0.2);
                color: white;
                text-decoration: none;
                transition: all 0.2s ease;
                font-size: 12px;
                padding: 0 10px;
                gap: 5px;
            }
    
            .status-label {
                font-size: 12px;
                font-weight: 700;
                white-space: nowrap;
            }
    
            .status-btn:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: scale(1.1);
            }
    
            .status-btn.home-btn:hover,
            .status-btn.watchlist-btn:hover,
            .status-btn.bag-btn:hover,
            .status-btn.logout-btn:hover {
                background: white;
                color: #8e44ad;
            }

       .status-btn.login-btn {
           background: white;
           color: #8e44ad;
           border: 1px solid #8e44ad;
           text-align: center;
       }

       .status-btn.login-btn:hover {
           background: rgba(255, 255, 255, 0.9);
           color: #8e44ad;
           transform: scale(1.1);
           box-shadow: 0 4px 12px rgba(142, 68, 173, 0.3);
       }

            .status-label {
                font-size: 11px;
            }

            .status-count-text {
                font-size: 10px;
                padding: 1px 4px;
                margin-left: 1px;
                margin-right: 2px;
                min-width: 18px;
            }

            .product-layout {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }

            .product-info {
                padding-left: 0;
            }

            .product-title {
                font-size: 20px;
                text-align: center;
                margin-bottom: 16px;
            }

            .product-rating {
                justify-content: center;
                margin-bottom: 20px;
            }

            .current-price {
                font-size: 24px;
                text-align: center;
                display: block;
                margin-bottom: 8px;
            }

            .original-price {
                text-align: center;
                display: block;
                margin-bottom: 8px;
            }

            .discount {
                text-align: center;
                display: block;
            }

            .price-breakdown {
                margin: 20px auto;
                max-width: 300px;
            }

            .highlights {
                text-align: left;
            }

            .product-actions {
                flex-direction: column;
                gap: 12px;
                max-width: 300px;
                margin: 0 auto 24px auto;
            }

            .quantity-selector {
                width: 100%;
                justify-content: center;
            }

            .btn-primary,
            .btn-secondary,
            .btn-watchlist {
                width: 100%;
                justify-content: center;
            }

            .delivery-info {
                text-align: left;
                max-width: 400px;
                margin: 0 auto 24px auto;
            }

            .seller-info {
                max-width: 400px;
                margin: 0 auto;
            }

            .thumbnail-container {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 10px;
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }

            /* Tab Content Mobile Alignment */
            .tab-content {
                padding: 20px 10px;
            }

            .tab-description {
                text-align: left;
                max-width: none;
            }

            .tab-description h3 {
                text-align: center;
                margin-bottom: 20px;
            }

            .tab-description h4 {
                text-align: left;
                margin: 20px 0 12px 0;
            }

            .tab-description p {
                text-align: justify;
                margin-bottom: 16px;
            }

            .tab-description ul {
                padding-left: 20px;
                margin: 16px 0;
            }

            .specifications-table {
                font-size: 14px;
            }

            .specifications-table th,
            .specifications-table td {
                padding: 12px 8px;
            }

            .reviews-section {
                max-width: none;
            }

            .reviews-header {
                text-align: center;
                margin-bottom: 20px;
            }

            .review-item {
                margin-bottom: 20px;
            }

            .review-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .review-text {
                text-align: justify;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 0.8rem;
                gap: 0.8rem;
                justify-content: center;
                align-items: center;
            }

            .profile-status-bar {
                padding: 6px 12px;
                border-radius: 18px;
                margin: 0 auto;
            }

            .status-content {
                gap: 8px;
                justify-content: center;
            }

            .user-avatar {
                width: 26px;
                height: 26px;
                font-size: 14px;
            }

            .user-name-display {
                font-size: 12px;
                text-align: center;
            }

            .user-status {
                font-size: 9px;
                text-align: center;
            }

            .status-actions {
                gap: 15px;
                margin-left: 8px;
            }

            .status-btn {
                position: relative;
                width: auto;
                height: 28px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50px;
                background: rgba(255, 255, 255, 0.2);
                color: white;
                text-decoration: none;
                transition: all 0.2s ease;
                font-size: 12px;
                padding: 0 10px;
                gap: 5px;
            }

            .status-label {
                font-size: 12px;
                font-weight: 700;
                white-space: nowrap;
            }

            .status-btn:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: scale(1.1);
            }

            .status-btn.home-btn:hover,
            .status-btn.watchlist-btn:hover,
            .status-btn.bag-btn:hover,
            .status-btn.logout-btn:hover,
            .status-btn.login-btn:hover {
                background: white;
                color: #8e44ad;
            }

            .status-btn.login-btn {
                background: white;
                color: #8e44ad;
                border: 1px solid #8e44ad;
            }

            .status-label {
                font-size: 10px;
            }

            .status-count-text {
                font-size: 9px;
                padding: 1px 3px;
                margin-left: 1px;
                margin-right: 2px;
                min-width: 16px;
            }

            .cart-badge {
                width: 18px;
                height: 18px;
                font-size: 10px;
            }

            .product-container {
                margin: 10px;
                padding: 0 10px;
            }

            .product-layout {
                padding: 16px;
            }

            .main-image {
                height: 300px;
            }

            .thumbnail {
                width: 60px;
                height: 60px;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .product-title {
                font-size: 18px;
            }

            .current-price {
                font-size: 22px;
            }

            .tab-content {
                padding: 16px 5px;
            }

            .tab-description h3 {
                font-size: 18px;
            }

            .tab-description h4 {
                font-size: 15px;
            }

            .tab-description p,
            .tab-description li {
                font-size: 13px;
            }

            .specifications-table th,
            .specifications-table td {
                padding: 10px 6px;
                font-size: 13px;
            }

            .review-item {
                padding: 16px;
            }

            .reviewer-name {
                font-size: 15px;
            }

            .review-text {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>

   <header>
       <h2>
           <img src="images/logo.png" alt="Lunsara Logo" class="logo">
           Lunsara
       </h2>

       <nav class="navbar">
           <div class="auth-buttons">
               <!-- Profile Status Bar -->
               <div class="profile-status-bar" id="profile-status-bar">
                   <div class="status-content">
                       <div class="user-avatar">
                           <i class="fas fa-user-circle"></i>
                       </div>
                       <div class="user-details">
                           <div class="user-name-display" id="user-name-display">Welcome, Guest!</div>
                       </div>
                       <div class="status-actions">
                           <a href="homepage.html" class="status-btn home-btn" title="Home">
                               <span class="status-label">Home</span>
                               <i class="fas fa-home"></i>
                           </a>
                           <a href="watchlist.html" class="status-btn watchlist-btn" title="Watchlist">
                               <span class="status-label">Watchlist</span>
                               <span id="status-watchlist-text" class="status-count-text">(0)</span>
                               <i class="fas fa-heart"></i>
                           </a>
                           <a href="cart.html" class="status-btn bag-btn" title="Shopping Bag">
                               <span class="status-label">Cart</span>
                               <span id="status-cart-text" class="status-count-text">(0)</span>
                               <i class="fas fa-shopping-bag"></i>
                           </a>
                           <a href="#" class="status-btn logout-btn" onclick="handleLogout(event)" title="Logout" style="display: none;">
                               <span class="status-label">Logout</span>
                               <i class="fas fa-sign-out-alt"></i>
                           </a>
                       </div>
                   </div>
               </div>
           </div>
       </nav>
   </header>


    <main class="product-container">
        <div class="product-layout">
            <!-- Product Gallery -->
            <div class="product-gallery">
                <img src="images/handloom_lungi.jpg" alt="Product Image" class="main-image" id="mainImage">
                <div class="thumbnail-container">
                    <img src="images/silk_saree_collection.jpg" alt="View 1" class="thumbnail active" onclick="changeImage(this, 0)">
                    <img src="images/silk_saree.jpg" alt="View 2" class="thumbnail" onclick="changeImage(this, 1)">
                    <img src="images/background1.jpg" alt="View 3" class="thumbnail" onclick="changeImage(this, 2)">
                    <img src="images/background2.jpg" alt="View 4" class="thumbnail" onclick="changeImage(this, 3)">
                </div>
            </div>

            <!-- Product Information -->
            <div class="product-info">
                <h1 class="product-title">Product Details</h1>

                <div class="product-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <span class="rating-count">4.2 (1,234 ratings)</span>
                </div>

                <div class="product-price">
                    <span class="current-price">₹0</span>
                    <span class="original-price">₹0</span>
                    <div class="discount">0% off</div>
                </div>

                <div class="price-breakdown">
                    <div class="price-row">
                        <span>Price:</span>
                        <span>₹12,500</span>
                    </div>
                    <div class="price-row">
                        <span>Delivery:</span>
                        <span class="delivery-free">FREE</span>
                    </div>
                    <div class="price-row total">
                        <span>Total:</span>
                        <span>₹12,500</span>
                    </div>
                </div>

                <div class="highlights">
                    <h3>Product Highlights</h3>
                    <ul class="highlight-list">
                        <li class="highlight-item">
                            <i class="fas fa-check"></i>
                            Premium quality fabric
                        </li>
                        <li class="highlight-item">
                            <i class="fas fa-check"></i>
                            Comfortable and breathable
                        </li>
                        <li class="highlight-item">
                            <i class="fas fa-check"></i>
                            Perfect for daily wear and traditional occasions
                        </li>
                        <li class="highlight-item">
                            <i class="fas fa-check"></i>
                            Traditional patterns and modern designs
                        </li>
                        <li class="highlight-item">
                            <i class="fas fa-check"></i>
                            Easy to maintain and care for
                        </li>
                    </ul>
                </div>

                <div class="product-actions">
                    <div class="quantity-selector">
                        <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                        <input type="text" class="quantity-input" value="1" id="quantity" readonly>
                        <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                    </div>
                    <button class="btn-primary" onclick="addToCart()">
                        <i class="fas fa-shopping-cart"></i>
                        ADD TO CART
                    </button>
                    <button class="btn-watchlist" onclick="addToWatchlist()" style="
                        background: #fff;
                        color: #8e44ad;
                        border: 2px solid #8e44ad;
                        padding: 12px 24px;
                        border-radius: 10px;
                        font-size: 16px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.2s;
                        display: inline-flex;
                        align-items: center;
                        gap: 8px;
                    ">
                        <i class="fas fa-heart"></i>
                        ADD TO WATCHLIST
                    </button>
                    <button class="btn-secondary" onclick="buyNow()">
                        <i class="fas fa-bolt"></i>
                        BUY NOW
                    </button>
                </div>

                <div class="delivery-info">
                    <h3>Delivery Options</h3>
                    <div class="delivery-item">
                        <i class="fas fa-truck"></i>
                        <span>Free delivery by <strong>Tomorrow, 23 Sep</strong></span>
                    </div>
                    <div class="delivery-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Deliver to <strong>Podatur Pettai - 631208</strong></span>
                    </div>
                    <div class="delivery-item">
                        <i class="fas fa-undo-alt"></i>
                        <span>30-day easy return available</span>
                    </div>
                </div>

                <div class="seller-info">
                    <div class="seller-name">Sold by Lunsara Store</div>
                    <div class="seller-rating">
                        <i class="fas fa-star"></i>
                        4.5 (2,345 ratings)
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Details Tabs -->
        <div class="product-tabs">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTabByElement(this, 'description')">Description</button>
                <button class="tab-btn" onclick="showTabByElement(this, 'specifications')">Specifications</button>
                <button class="tab-btn" onclick="showTabByElement(this, 'reviews')">Reviews</button>
            </div>

            <div id="description" class="tab-content active">
                <div class="tab-description">
                    <h3>Product Description</h3>
                    <p>Discover our premium collection of traditional lungis, crafted with care and attention to detail. Made from high-quality cotton and cotton blend fabrics, these lungis offer superior comfort and breathability for everyday wear.</p>
                    <p>Perfect for traditional occasions, casual wear, and daily use, our lungis feature traditional patterns and modern designs that reflect both heritage and contemporary style. Each piece is designed for maximum comfort and ease of maintenance.</p>

                    <h4>Care Instructions:</h4>
                    <ul>
                        <li>Machine wash in cold water</li>
                        <li>Use mild detergent</li>
                        <li>Dry in shade</li>
                        <li>Iron on medium heat</li>
                    </ul>
                </div>
            </div>

            <div id="specifications" class="tab-content">
                <table class="specifications-table" id="specifications-table">
                    <tr>
                        <th>Material</th>
                        <td>Premium Cotton</td>
                    </tr>
                    <tr>
                        <th>Length</th>
                        <td>2.5 meters</td>
                    </tr>
                    <tr>
                        <th>Width</th>
                        <td>1.25 meters</td>
                    </tr>
                    <tr>
                        <th>Pattern</th>
                        <td>Traditional Checkered/Striped</td>
                    </tr>
                    <tr>
                        <th>Occasion</th>
                        <td>Daily Wear, Casual, Traditional</td>
                    </tr>
                    <tr>
                        <th>Care</th>
                        <td>Machine Wash</td>
                    </tr>
                </table>
            </div>

            <div id="reviews" class="tab-content">
                <div class="reviews-section">
                    <div class="reviews-header">
                        <h3 class="reviews-title">Customer Reviews</h3>
                        <div class="reviews-summary">Based on 1,234 customer reviews</div>
                    </div>

                    <div class="review-item">
                        <div class="review-header">
                            <span class="reviewer-name">Priya Sharma</span>
                            <div class="review-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <span style="margin-left: 8px; color: #878787; font-size: 12px;">5.0</span>
                            </div>
                        </div>
                        <div class="review-text">Beautiful saree! The quality is excellent and the zari work is intricate. Perfect for my wedding. Highly recommended!</div>
                        <div class="review-date">Reviewed on September 15, 2024</div>
                    </div>

                    <div class="review-item">
                        <div class="review-header">
                            <span class="reviewer-name">Anita Reddy</span>
                            <div class="review-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <span style="margin-left: 8px; color: #878787; font-size: 12px;">4.0</span>
                            </div>
                        </div>
                        <div class="review-text">Good quality silk saree. The color is exactly as shown. Delivery was fast and packaging was good. Very satisfied with the purchase.</div>
                        <div class="review-date">Reviewed on September 10, 2024</div>
                    </div>

                    <div class="review-item">
                        <div class="review-header">
                            <span class="reviewer-name">Meera Krishnan</span>
                            <div class="review-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                                <span style="margin-left: 8px; color: #878787; font-size: 12px;">4.5</span>
                            </div>
                        </div>
                        <div class="review-text">Absolutely stunning piece! The silk quality is premium and the craftsmanship is exceptional. Perfect for special occasions.</div>
                        <div class="review-date">Reviewed on September 8, 2024</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Related Products -->
    <section class="related-products">
        <h2 class="section-title">You Might Also Like</h2>
        <div class="products-grid">
            <div class="product-card" onclick="loadRecommendedProduct('printed-saree')">
                <img src="images/printed_saree_collection.jpg" alt="Printed Saree">
                <div class="product-card-info">
                    <h3 class="product-card-title">Printed Saree</h3>
                    <div class="product-card-price">₹2,800</div>
                </div>
            </div>
            <div class="product-card" onclick="loadRecommendedProduct('blue-lungi')">
                <img src="images/lungi_collection.jpg" alt="Blue Checkered Lungi">
                <div class="product-card-info">
                    <h3 class="product-card-title">Blue Checkered Lungi</h3>
                    <div class="product-card-price">₹380</div>
                </div>
            </div>
            <div class="product-card" onclick="loadRecommendedProduct('red-silk-saree')">
                <img src="images/silk_saree.jpg" alt="Red Silk Saree">
                <div class="product-card-info">
                    <h3 class="product-card-title">Red Silk Saree</h3>
                    <div class="product-card-price">₹15,000</div>
                </div>
            </div>
            <div class="product-card" onclick="loadRecommendedProduct('designer-printed-saree')">
                <img src="images/printed_saree.jpg" alt="Designer Printed Saree">
                <div class="product-card-info">
                    <h3 class="product-card-title">Designer Printed Saree</h3>
                    <div class="product-card-price">₹3,200</div>
                </div>
            </div>
        </div>
    </section>

    <script src="auth.js"></script>
    <script src="cart.js"></script>
    <script>
        // Product data - will be updated by loadSelectedProduct()
        let product = {
            name: 'Product Details',
            price: 0,
            originalPrice: 0,
            images: [
                'images/handloom_lungi.jpg',
                'images/lungi_collection.jpg',
                'images/silk_saree.jpg',
                'images/printed_saree.jpg'
            ]
        };

        // Products data for recommendations
        const productsData = {
            'printed-saree': {
                id: 'printed-saree-1',
                name: 'Printed Saree',
                price: 2800,
                originalPrice: 3500,
                image: 'images/printed_saree_collection.jpg',
                category: 'saree'
            },
            'blue-lungi': {
                id: 'lungi-1',
                name: 'Blue Checkered Lungi',
                price: 380,
                originalPrice: 450,
                image: 'images/lungi_collection.jpg',
                category: 'lungi'
            },
            'red-silk-saree': {
                id: 'silk-saree-1',
                name: 'Red Silk Saree',
                price: 15000,
                originalPrice: 18000,
                image: 'images/silk_saree.jpg',
                category: 'saree'
            },
            'designer-printed-saree': {
                id: 'printed-saree-2',
                name: 'Designer Printed Saree',
                price: 3200,
                originalPrice: 4000,
                image: 'images/printed_saree.jpg',
                category: 'saree'
            }
        };

        let currentImageIndex = 0;
        let quantity = 1;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded - Initializing page...');

            initializeImageGallery();
            updateWatchlistCount();

            // Create a test user for demonstration if no users exist
            createTestUserIfNeeded();

            // Load product data with a small delay to ensure DOM is fully ready
            setTimeout(() => {
                console.log('Loading selected product after DOM ready...');
                loadSelectedProduct();
            }, 100);

            // Initialize status bar - always show for all users
            updateUserInterface();
        });



        // Authentication event handlers
        function handleLogout(event) {
            event.preventDefault();
            showLogoutModal();
        }

        function handleLoginClick(event) {
            event.preventDefault();
            window.location.href = 'login.html';
        }

        // Show logout confirmation modal
        function showLogoutModal() {
            const modal = document.getElementById('logout-modal');
            if (modal) {
                modal.style.display = 'flex';
                setTimeout(() => {
                    modal.classList.add('show');
                }, 100);
            } else {
                // Fallback if modal doesn't exist
                if (confirm('Are you sure you want to logout?')) {
                    auth.logout();
                    showNotification('You have been logged out successfully');
                    window.location.reload();
                }
            }
        }

        // Confirm logout action
        function confirmLogout() {
            const modal = document.getElementById('logout-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
            auth.logout();
            showNotification('You have been logged out successfully');
            window.location.reload();
        }

        // Cancel logout action
        function cancelLogout() {
            const modal = document.getElementById('logout-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        // Handle bag/cart click
        function handleBagClick(event) {
            event.preventDefault();
            window.location.href = 'cart.html';
        }

        // Create a test user for demonstration
        function createTestUserIfNeeded() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const currentUser = localStorage.getItem('currentUser');

            if (users.length === 0 && !currentUser) {
                console.log('Creating test user for demonstration...');

                // Create a test user
                const testUser = {
                    id: 'demo-user-123',
                    name: 'Demo User',
                    email: 'demo@lunsara.com',
                    phone: '9876543210',
                    password: 'demo123',
                    createdAt: new Date().toISOString(),
                    profile: {
                        addresses: [],
                        orders: [],
                        preferences: {}
                    }
                };

                // Save test user
                users.push(testUser);
                localStorage.setItem('users', JSON.stringify(users));

                // Auto-login the test user
                const sessionUser = {
                    id: testUser.id,
                    name: testUser.name,
                    email: testUser.email,
                    loginTime: new Date().toISOString()
                };

                localStorage.setItem('currentUser', JSON.stringify(sessionUser));

                console.log('Test user created and logged in');
                console.log('You can now see the profile status bar!');

                // Update UI to show the logged-in state
                updateUserInterface();

                // Show notification
                showNotification('Demo user logged in! You can now see the profile status bar.', 'success');
            }
        }


        // Update user interface based on authentication state
        function updateUserInterface() {
            const profileStatusBar = document.getElementById('profile-status-bar');
            const userNameDisplay = document.getElementById('user-name-display');
            const loginBtn = document.querySelector('.status-btn.login-btn');
            const logoutBtn = document.querySelector('.status-btn.logout-btn');

            if (auth.isLoggedIn()) {
                const currentUser = auth.getCurrentUser();

                // Always show profile status bar (for demo purposes)
                if (profileStatusBar) {
                    profileStatusBar.style.display = 'block';
                }
                if (userNameDisplay) {
                    userNameDisplay.textContent = `Welcome, ${currentUser.name}!`;
                }

                // Show logout button, hide login button
                if (loginBtn) loginBtn.style.display = 'none';
                if (logoutBtn) logoutBtn.style.display = 'block';

            } else {
                // Always show profile status bar (for demo purposes)
                if (profileStatusBar) {
                    profileStatusBar.style.display = 'block';
                }

                // Update welcome message for non-logged-in users
                if (userNameDisplay) {
                    userNameDisplay.textContent = 'Welcome, Guest!';
                }

                // Show login button, hide logout button
                if (loginBtn) loginBtn.style.display = 'block';
                if (logoutBtn) logoutBtn.style.display = 'none';
            }
        }

        // Update watchlist and cart counts in status bar
        function updateWatchlistCount() {
            const watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];
            const count = watchlist.length;
            const badge = document.getElementById('status-watchlist-text');
            if (badge) {
                badge.textContent = `(${count})`;
            }

            // Update cart count
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalCartItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartBadge = document.getElementById('status-cart-text');
            if (cartBadge) {
                cartBadge.textContent = `(${totalCartItems})`;
            }
        }

        // Listen for authentication state changes
        window.addEventListener('authStateChanged', function(e) {
            updateUserInterface();
        });

        // Listen for cart and watchlist updates
        window.addEventListener('cartUpdated', function() {
            updateWatchlistCount();
        });

        window.addEventListener('watchlistUpdated', function() {
            updateWatchlistCount();
        });



        // Show notification (global utility function)
        function showNotification(message, type = 'success') {
            // Create notification element if it doesn't exist
            let notification = document.getElementById('global-notification');
            if (!notification) {
                notification = document.createElement('div');
                notification.id = 'global-notification';
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'error' ? '#e74c3c' : '#27ae60'};
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                    z-index: 10000;
                    transform: translateX(100%);
                    transition: transform 0.3s ease;
                `;
                document.body.appendChild(notification);
            }

            notification.textContent = message;
            notification.style.background = type === 'error' ? '#e74c3c' : '#27ae60';
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Show custom cart notification
        function showCartNotification(quantity) {
            console.log('showCartNotification called with quantity:', quantity);

            // Remove existing notification
            const existingNotification = document.getElementById('cart-notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // Create notification element
            const notification = document.createElement('div');
            notification.id = 'cart-notification';
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, #27ae60, #2ecc71);
                color: white;
                padding: 1.2rem 1.5rem;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(39, 174, 96, 0.3);
                z-index: 10000;
                transform: translateX(400px);
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                min-width: 280px;
                border-left: 4px solid #219a52;
                opacity: 0;
                visibility: hidden;
            `;

            notification.innerHTML = `
                <div class="cart-notification-content" style="display: flex; align-items: center; gap: 12px;">
                    <div class="cart-notification-icon" style="
                        font-size: 20px;
                        color: #2ecc71;
                        background: white;
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="cart-notification-text" style="flex: 1;">
                        <div class="cart-notification-title" style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">Added to Cart!</div>
                        <div class="cart-notification-message" style="font-size: 14px; opacity: 0.9;">${quantity} item${quantity > 1 ? 's' : ''} added successfully</div>
                    </div>
                    <button class="cart-notification-close" onclick="closeCartNotification()" style="
                        background: none;
                        border: none;
                        color: white;
                        font-size: 18px;
                        cursor: pointer;
                        padding: 4px;
                        opacity: 0.7;
                        transition: opacity 0.2s;
                    ">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            document.body.appendChild(notification);
            console.log('Notification element created and added to DOM');

            // Show notification with animation
            setTimeout(() => {
                console.log('Adding show class to notification');
                notification.style.transform = 'translateX(0)';
                notification.style.opacity = '1';
                notification.style.visibility = 'visible';
            }, 100);

            // Auto-hide after 2 seconds
            setTimeout(() => {
                console.log('Auto-hiding notification after 2 seconds');
                closeCartNotification();
            }, 2000);
        }

        // Close cart notification
        function closeCartNotification() {
            const notification = document.getElementById('cart-notification');
            if (notification) {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 400);
            }
        }

        // Load selected product from localStorage
        function loadSelectedProduct() {
            console.log('=== loadSelectedProduct called ===');
            console.log('Available localStorage keys:', Object.keys(localStorage));
            console.log('Raw selectedProduct from localStorage:', localStorage.getItem('selectedProduct'));

            try {
                const selectedProduct = JSON.parse(localStorage.getItem('selectedProduct'));
                console.log('Parsed selectedProduct:', selectedProduct);

                if (selectedProduct && selectedProduct.name) {
                    console.log('Loading selected product:', selectedProduct);
                    console.log('Product name:', selectedProduct.name);
                    console.log('Product image path:', selectedProduct.image);
                    console.log('Product price:', selectedProduct.price);
                    console.log('Product originalPrice:', selectedProduct.originalPrice);
                    console.log('Product category:', selectedProduct.category);
                    console.log('Product ID:', selectedProduct.id);

                    // Validate required fields
                    if (!selectedProduct.image) {
                        console.error('Product image is missing!');
                        selectedProduct.image = 'images/handloom_lungi.jpg'; // Fallback image
                    }

                    if (!selectedProduct.price) {
                        console.error('Product price is missing!');
                        selectedProduct.price = '0';
                    }

                    if (!selectedProduct.originalPrice) {
                        console.error('Product originalPrice is missing!');
                        selectedProduct.originalPrice = String(Math.round(parseInt(selectedProduct.price) * 1.3));
                    }

                    // Update all product content
                    updateProductContent(selectedProduct);
                } else {
                    console.log('No valid selected product found in localStorage');
                    console.log('Available localStorage keys:', Object.keys(localStorage));
                    console.log('localStorage content:', JSON.stringify(localStorage, null, 2));
                    // Show error message if no product is selected
                    showNotification('No product selected. Please go back and select a product.', 'error');
                }
            } catch (error) {
                console.error('Error loading selected product:', error);
                showNotification('Error loading product data. Please try again.', 'error');
            }
        }

        // Load recommended product and update current page
        function loadRecommendedProduct(productKey) {
            console.log('=== loadRecommendedProduct called ===');
            console.log('Product key:', productKey);

            const productData = productsData[productKey];
            if (productData) {
                console.log('Loading recommended product:', productData);

                // Update all product content with the new product data
                updateProductContent(productData);

                // Scroll to top of the page smoothly
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });

                // Show notification
                showNotification(`Now showing: ${productData.name}`, 'success');
            } else {
                console.error('Product not found for key:', productKey);
                showNotification('Product not found!', 'error');
            }
        }

        // Update all product content based on selected product
        function updateProductContent(selectedProduct) {
            console.log('=== updateProductContent called ===');
            console.log('Updating content for:', selectedProduct.name);

            // Handle price conversion - check if already number or string
            const cleanPrice = typeof selectedProduct.price === 'string'
                ? parseInt(selectedProduct.price.replace(/[^\d]/g, ''))
                : parseInt(selectedProduct.price);

            const cleanOriginalPrice = typeof selectedProduct.originalPrice === 'string'
                ? parseInt(selectedProduct.originalPrice.replace(/[^\d]/g, ''))
                : parseInt(selectedProduct.originalPrice);

            console.log('Cleaned prices:', { cleanPrice, cleanOriginalPrice });

            // Update product title
            const productTitle = document.querySelector('.product-title');
            if (productTitle) {
                productTitle.textContent = selectedProduct.name;
                console.log('Updated title to:', selectedProduct.name);
            }

            // Update price information
            const currentPrice = document.querySelector('.current-price');
            const originalPrice = document.querySelector('.original-price');
            const discount = document.querySelector('.discount');

            console.log('Price elements found:', { currentPrice: !!currentPrice, originalPrice: !!originalPrice, discount: !!discount });
            console.log('Price values - cleanPrice:', cleanPrice, 'cleanOriginalPrice:', cleanOriginalPrice);

            if (currentPrice) {
                currentPrice.textContent = `₹${cleanPrice.toLocaleString()}`;
                console.log('Updated current price to:', currentPrice.textContent);
            }
            if (originalPrice) {
                originalPrice.textContent = `₹${cleanOriginalPrice.toLocaleString()}`;
                console.log('Updated original price to:', originalPrice.textContent);
            }

            // Calculate discount percentage
            const discountPercent = Math.round(((cleanOriginalPrice - cleanPrice) / cleanOriginalPrice) * 100);
            console.log('Calculated discount percent:', discountPercent);
            if (discount) {
                discount.textContent = `${discountPercent}% off`;
                console.log('Updated discount to:', discount.textContent);
            }

            // Update price breakdown
            const priceBreakdownRows = document.querySelectorAll('.price-breakdown .price-row');
            console.log('Price breakdown rows found:', priceBreakdownRows.length);
            if (priceBreakdownRows.length >= 3) {
                console.log('Updating price breakdown with cleanPrice:', cleanPrice);
                priceBreakdownRows[0].querySelector('span:last-child').textContent = `₹${cleanPrice.toLocaleString()}`;
                priceBreakdownRows[2].querySelector('span:last-child').textContent = `₹${cleanPrice.toLocaleString()}`;
                console.log('Price breakdown updated successfully');
            } else {
                console.error('Price breakdown rows not found or insufficient rows');
            }

            // Update main image
            const mainImage = document.getElementById('mainImage');
            if (mainImage) {
                console.log('Updating main image to:', selectedProduct.image);
                console.log('Main image element found:', mainImage);
                mainImage.src = selectedProduct.image;
                mainImage.alt = selectedProduct.name;
                console.log('Main image src set to:', mainImage.src);
            } else {
                console.error('Main image element not found!');
            }

            // Update thumbnails
            const thumbnails = document.querySelectorAll('.thumbnail');
            console.log('Found thumbnails:', thumbnails.length);
            thumbnails.forEach((thumbnail, index) => {
                console.log('Updating thumbnail', index, 'to:', selectedProduct.image);
                thumbnail.src = selectedProduct.image;
                thumbnail.alt = `${selectedProduct.name} - View ${index + 1}`;
            });

            // Update product data object
            product.name = selectedProduct.name;
            product.price = cleanPrice;
            product.originalPrice = cleanOriginalPrice;
            product.images = [selectedProduct.image, selectedProduct.image, selectedProduct.image, selectedProduct.image];

            // Update page title
            document.title = `${selectedProduct.name} | Lunsara`;

            console.log('About to call update functions with product name:', selectedProduct.name);

            // Update product highlights based on product type
            console.log('Calling updateProductHighlights...');
            updateProductHighlights(selectedProduct.name);

            // Update product description based on product type
            console.log('Calling updateProductDescription...');
            updateProductDescription(selectedProduct.name);

            // Update specifications based on product type
            console.log('Calling updateProductSpecifications...');
            updateProductSpecifications(selectedProduct.name);

            console.log('All update functions called successfully');
            console.log('Product content updated successfully for:', selectedProduct.name);
        }

        // Update product specifications based on product type
        function updateProductSpecifications(productName) {
            const specificationsTable = document.getElementById('specifications-table');

            console.log('=== updateProductSpecifications called ===');
            console.log('Product name:', productName);
            console.log('Checking if product name contains "lungi":', productName.toLowerCase().includes('lungi'));
            console.log('Checking if product name contains "cotton":', productName.toLowerCase().includes('cotton'));
            console.log('Checking if product name contains "traditional":', productName.toLowerCase().includes('traditional'));

            if (productName.toLowerCase().includes('lungi')) {
                console.log('MATCHED: Product is a lungi - updating specifications');
                specificationsTable.innerHTML = `
                    <tr>
                        <th>Material</th>
                        <td>Premium Cotton</td>
                    </tr>
                    <tr>
                        <th>Length</th>
                        <td>2.5 meters</td>
                    </tr>
                    <tr>
                        <th>Width</th>
                        <td>1.25 meters</td>
                    </tr>
                    <tr>
                        <th>Pattern</th>
                        <td>Traditional Checkered/Striped</td>
                    </tr>
                    <tr>
                        <th>Occasion</th>
                        <td>Daily Wear, Casual, Traditional</td>
                    </tr>
                    <tr>
                        <th>Care</th>
                        <td>Machine Wash</td>
                    </tr>
                `;
            } else if (productName.toLowerCase().includes('printed')) {
                specificationsTable.innerHTML = `
                    <tr>
                        <th>Material</th>
                        <td>Polyester Blend</td>
                    </tr>
                    <tr>
                        <th>Length</th>
                        <td>6.3 meters</td>
                    </tr>
                    <tr>
                        <th>Blouse Piece</th>
                        <td>Included (0.8 meters)</td>
                    </tr>
                    <tr>
                        <th>Print Type</th>
                        <td>Digital Print</td>
                    </tr>
                    <tr>
                        <th>Occasion</th>
                        <td>Casual, Semi-Formal, Daily Wear</td>
                    </tr>
                    <tr>
                        <th>Care</th>
                        <td>Machine Wash</td>
                    </tr>
                `;
            } else if (productName.toLowerCase().includes('silk')) {
                specificationsTable.innerHTML = `
                    <tr>
                        <th>Material</th>
                        <td>Pure Mulberry Silk</td>
                    </tr>
                    <tr>
                        <th>Zari Work</th>
                        <td>Golden Zari Thread</td>
                    </tr>
                    <tr>
                        <th>Length</th>
                        <td>6.5 meters</td>
                    </tr>
                    <tr>
                        <th>Blouse Piece</th>
                        <td>Included (1 meter)</td>
                    </tr>
                    <tr>
                        <th>Occasion</th>
                        <td>Wedding, Festival, Party</td>
                    </tr>
                    <tr>
                        <th>Care</th>
                        <td>Dry Clean Only</td>
                    </tr>
                `;
            }
        }

        // Update product highlights based on product type
        function updateProductHighlights(productName) {
            const highlightsList = document.querySelector('.highlight-list');
            const highlightsTitle = document.querySelector('.highlights h3');

            console.log('=== updateProductHighlights called ===');
            console.log('Product name:', productName);
            console.log('Checking if product name contains "lungi":', productName.toLowerCase().includes('lungi'));

            if (productName.toLowerCase().includes('lungi')) {
                console.log('MATCHED: Product is a lungi - updating highlights');
                highlightsTitle.textContent = 'Lungi Highlights';
                highlightsList.innerHTML = `
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Premium quality cotton fabric
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Traditional handwoven patterns
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Comfortable for daily wear
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Perfect for traditional occasions
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Easy to maintain and wash
                    </li>
                `;
            } else if (productName.toLowerCase().includes('printed')) {
                highlightsTitle.textContent = 'Printed Saree Highlights';
                highlightsList.innerHTML = `
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Vibrant digital print patterns
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Lightweight and comfortable
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Perfect for casual and semi-formal wear
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Modern contemporary designs
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Easy care and machine washable
                    </li>
                `;
            } else if (productName.toLowerCase().includes('silk')) {
                highlightsTitle.textContent = 'Silk Saree Highlights';
                highlightsList.innerHTML = `
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Premium quality silk fabric
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Handwoven with intricate patterns
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Perfect for weddings and special occasions
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Traditional South Indian design
                    </li>
                    <li class="highlight-item">
                        <i class="fas fa-check"></i>
                        Comes with matching blouse piece
                    </li>
                `;
            }
        }

        // Update product description based on product type
        function updateProductDescription(productName) {
            const descriptionContent = document.querySelector('.tab-description');

            console.log('=== updateProductDescription called ===');
            console.log('Product name:', productName);
            console.log('Checking if product name contains "lungi":', productName.toLowerCase().includes('lungi'));

            if (productName.toLowerCase().includes('lungi')) {
                console.log('MATCHED: Product is a lungi - updating description');
                descriptionContent.innerHTML = `
                    <h3>Product Description</h3>
                    <p>Discover the comfort and tradition of our premium lungi collection. Made from high-quality cotton fabric, these lungis feature traditional patterns and modern designs that are perfect for everyday wear and special occasions.</p>
                    <p>Our lungis are designed for maximum comfort with breathable fabric that keeps you cool in warm weather. The traditional checkered and striped patterns reflect the rich cultural heritage while providing a contemporary look.</p>

                    <h4>Care Instructions:</h4>
                    <ul>
                        <li>Machine wash in cold water</li>
                        <li>Use mild detergent</li>
                        <li>Dry in shade</li>
                        <li>Iron on medium heat</li>
                    </ul>
                `;
            } else if (productName.toLowerCase().includes('printed')) {
                descriptionContent.innerHTML = `
                    <h3>Product Description</h3>
                    <p>Experience the vibrant world of printed sarees with our exclusive collection. Featuring modern digital print technology, these sarees showcase contemporary patterns and designs that are perfect for casual outings and semi-formal occasions.</p>
                    <p>The lightweight fabric ensures comfort throughout the day, while the bold prints make a style statement. Each saree is crafted with attention to detail and quality finishing.</p>

                    <h4>Care Instructions:</h4>
                    <ul>
                        <li>Machine wash in cold water</li>
                        <li>Use gentle cycle</li>
                        <li>Avoid direct sunlight while drying</li>
                        <li>Iron on low to medium heat</li>
                    </ul>
                `;
            } else if (productName.toLowerCase().includes('silk')) {
                descriptionContent.innerHTML = `
                    <h3>Product Description</h3>
                    <p>Experience the timeless elegance of our premium silk saree collection, a masterpiece of traditional craftsmanship. This luxurious saree is handwoven using pure mulberry silk threads and features intricate patterns that create stunning visual appeal.</p>
                    <p>Perfect for weddings, festivals, and special occasions, this saree comes with a matching blouse piece and showcases the rich heritage of traditional weaving. The silk fabric provides excellent drape and comfort, making it ideal for all-day wear.</p>

                    <h4>Care Instructions:</h4>
                    <ul>
                        <li>Dry clean only</li>
                        <li>Store in a cool, dry place</li>
                        <li>Avoid direct sunlight</li>
                        <li>Use mild detergent for washing</li>
                    </ul>
                `;
            }
        }

        // Image gallery functions
        function initializeImageGallery() {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = product.images[0];
        }

        function changeImage(thumbnail, index) {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = thumbnail.src;
            currentImageIndex = index;

            // Update active thumbnail
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            thumbnail.classList.add('active');
        }

        // Quantity functions
        function increaseQuantity() {
            quantity++;
            document.getElementById('quantity').value = quantity;
            updatePrice();
        }

        function decreaseQuantity() {
            if (quantity > 1) {
                quantity--;
                document.getElementById('quantity').value = quantity;
                updatePrice();
            }
        }

        function updatePrice() {
            const totalPrice = product.price * quantity;
            document.querySelector('.current-price').textContent = `₹${totalPrice.toLocaleString()}`;
            document.querySelector('.price-breakdown .total span:last-child').textContent = `₹${totalPrice.toLocaleString()}`;
        }

        // Tab functions
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Alternative tab function with proper event handling
        function showTabByElement(element, tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            element.classList.add('active');
        }

        // Watchlist functions
        function addToWatchlist() {
            const watchlistItem = {
                name: product.name,
                price: product.price,
                originalPrice: product.originalPrice,
                image: product.images[0],
                dateAdded: new Date().toISOString()
            };

            const watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];
            const existingItemIndex = watchlist.findIndex(item => item.name === product.name);

            if (existingItemIndex === -1) {
                watchlist.push(watchlistItem);
                localStorage.setItem('watchlist', JSON.stringify(watchlist));
                updateWatchlistCount();
                window.dispatchEvent(new CustomEvent('watchlistUpdated'));
                showWatchlistNotification();
            } else {
                showWatchlistNotification('Already in Watchlist');
            }
        }

        // Show watchlist notification with same animation as cart
        function showWatchlistNotification(message = '') {
            console.log('showWatchlistNotification called');

            // Remove existing notification
            const existingNotification = document.getElementById('watchlist-notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // Default message
            const displayMessage = message || 'Added to Watchlist!';

            // Create notification element
            const notification = document.createElement('div');
            notification.id = 'watchlist-notification';
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, #e74c3c, #c0392b);
                color: white;
                padding: 1.2rem 1.5rem;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(231, 76, 60, 0.3);
                z-index: 10000;
                transform: translateX(400px);
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                min-width: 280px;
                border-left: 4px solid #a93226;
                opacity: 0;
                visibility: hidden;
            `;

            notification.innerHTML = `
                <div class="watchlist-notification-content" style="display: flex; align-items: center; gap: 12px;">
                    <div class="watchlist-notification-icon" style="
                        font-size: 20px;
                        color: #e74c3c;
                        background: white;
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="watchlist-notification-text" style="flex: 1;">
                        <div class="watchlist-notification-title" style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">Watchlist Updated!</div>
                        <div class="watchlist-notification-message" style="font-size: 14px; opacity: 0.9;">${displayMessage}</div>
                    </div>
                    <button class="watchlist-notification-close" onclick="closeWatchlistNotification()" style="
                        background: none;
                        border: none;
                        color: white;
                        font-size: 18px;
                        cursor: pointer;
                        padding: 4px;
                        opacity: 0.7;
                        transition: opacity 0.2s;
                    ">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            document.body.appendChild(notification);
            console.log('Watchlist notification element created and added to DOM');

            // Show notification with animation
            setTimeout(() => {
                console.log('Adding show animation to watchlist notification');
                notification.style.transform = 'translateX(0)';
                notification.style.opacity = '1';
                notification.style.visibility = 'visible';
            }, 100);

            // Auto-hide after 2 seconds
            setTimeout(() => {
                console.log('Auto-hiding watchlist notification after 2 seconds');
                closeWatchlistNotification();
            }, 2000);
        }

        // Close watchlist notification
        function closeWatchlistNotification() {
            const notification = document.getElementById('watchlist-notification');
            if (notification) {
                notification.style.transform = 'translateX(400px)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    notification.remove();
                }, 400);
            }
        }

        // Cart functions
        function addToCart() {
            const cartItem = {
                name: product.name,
                price: product.price,
                image: product.images[0],
                quantity: quantity
            };

            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItemIndex = cart.findIndex(item => item.name === product.name);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                cart.push(cartItem);
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateWatchlistCount();
            window.dispatchEvent(new CustomEvent('cartUpdated'));
            showCartNotification(quantity);
        }

        function buyNow() {
            // Add item to cart for processing
            const cartItem = {
                name: product.name,
                price: product.price,
                image: product.images[0],
                quantity: quantity
            };

            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItemIndex = cart.findIndex(item => item.name === product.name);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                cart.push(cartItem);
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateWatchlistCount();
            window.dispatchEvent(new CustomEvent('cartUpdated'));

            // Redirect directly to delivery address page - NO ALERT
            window.location.href = 'delivery-address.html';
        }

    </script>
</body>
</html>

